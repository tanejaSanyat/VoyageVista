{"ast":null,"code":"import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{useLocation,useParams}from\"react-router-dom\";import{useAuth}from\"../../components/Context/AuthContext\";import Sidebar from\"../../components/Dashboard/Sidebar\";import Message from\"../../components/Message/Message\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyBooking=()=>{const[message,setMessage]=useState(\"\");const[booking,setBooking]=useState();const[isLoading,setLoading]=useState(true);const location=useLocation();const{id}=useParams();const{currentUser}=useAuth();useEffect(()=>{setMessage(location.message);},[location]);useEffect(()=>{axios.get(\"https://shocking-cheateau-10764.herokuapp.com/my-booking/\".concat(id)).then(result=>{if(result.data.length>0){setBooking(result.data);setLoading(false);//stop loading when data is fetched\n}}).catch(error=>console.log(error));setLoading(false);},[id]);const handleDelete=id=>{const proceed=window.confirm(\"Are you sure, You went to delete\");if(proceed){axios.delete(\"https://shocking-cheateau-10764.herokuapp.com/booking/\".concat(id)).then(result=>{if(result.data.deletedCount>0){setMessage(\"Delete success!\");const remainingBooking=booking.filter(booking=>booking._id!==id);setBooking(remainingBooking);}}).catch(error=>console.log(error));}};return/*#__PURE__*/_jsx(\"div\",{className:\"container \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"main\",{className:\"bg-gray-100 w-full mb-16\",children:[message&&/*#__PURE__*/_jsx(\"div\",{className:\"md:w-3/4 py-4 px-8 float-right\",children:/*#__PURE__*/_jsx(Message,{message:message})}),/*#__PURE__*/_jsx(\"header\",{className:\"px-8 py-8\",children:/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-semibold\",children:[\"Hi, \",currentUser===null||currentUser===void 0?void 0:currentUser.displayName,\" hear your booking\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen py-5 px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto w-full\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"mx-auto  w-full whitespace-nowrap rounded-lg bg-white divide-y divide-gray-300 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-900\",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-white text-left\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"font-semibold text-sm uppercase px-6 py-4\",children:\"Tour name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"font-semibold text-sm uppercase px-6 py-4\",children:\"Tour date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"font-semibold text-sm uppercase px-6 py-4\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{className:\"font-semibold text-sm uppercase px-6 py-4\",children:\"Booking DATE\"}),/*#__PURE__*/_jsx(\"th\",{className:\"font-semibold text-sm uppercase px-6 py-4 text-center\",children:\"status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"font-semibold text-sm uppercase px-6 py-4 text-center\",children:\"Booking By\"}),/*#__PURE__*/_jsx(\"th\",{className:\"font-semibold text-sm uppercase px-6 py-4\",children:\"Action\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"divide-y divide-gray-200\",children:[isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-40 h-40 border-t-4 border-b-4 border-green-900 rounded-full animate-spin\"})}),!!booking&&booking.length>0?booking.map(booking=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-3\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",booking===null||booking===void 0?void 0:booking.title,\" \"]})})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"\",children:booking===null||booking===void 0?void 0:booking.tour_date})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",booking===null||booking===void 0?void 0:booking.package_price]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-center\",children:booking===null||booking===void 0?void 0:booking.create_at}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm w-1/3 pb-1 b capitalize font-semibold px-2 rounded-full \".concat(booking.status===\"pending\"?\"bg-red-400\":\"bg-green-600\"),children:booking===null||booking===void 0?void 0:booking.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"p\",{children:booking===null||booking===void 0?void 0:booking.name})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(booking===null||booking===void 0?void 0:booking._id),className:\"text-red-500 hover:underline\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-trash-alt text-2xl \"})})})]},booking._id)):/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Data Not Found.\"})]})]})})})]})]})});};export default MyBooking;","map":{"version":3,"names":["axios","React","useEffect","useState","useLocation","useParams","useAuth","Sidebar","Message","jsx","_jsx","jsxs","_jsxs","MyBooking","message","setMessage","booking","setBooking","isLoading","setLoading","location","id","currentUser","get","concat","then","result","data","length","catch","error","console","log","handleDelete","proceed","window","confirm","delete","deletedCount","remainingBooking","filter","_id","className","children","displayName","map","title","tour_date","package_price","create_at","status","name","onClick"],"sources":["/Users/sanyattaneja/Downloads/VoyageVista-main/src/pages/Dashboard/MyBooking.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { useLocation, useParams } from \"react-router-dom\";\nimport { useAuth } from \"../../components/Context/AuthContext\";\nimport Sidebar from \"../../components/Dashboard/Sidebar\";\nimport Message from \"../../components/Message/Message\";\nconst MyBooking = () => {\n  const [message, setMessage] = useState(\"\");\n  const [booking, setBooking] = useState();\n  const [isLoading, setLoading] = useState(true);\n  const location = useLocation();\n  const { id } = useParams();\n  const { currentUser } = useAuth();\n\n  useEffect(() => {\n    setMessage(location.message);\n  }, [location]);\n\n  useEffect(() => {\n    axios\n      .get(`https://shocking-cheateau-10764.herokuapp.com/my-booking/${id}`)\n      .then((result) => {\n        if (result.data.length > 0) {\n          setBooking(result.data);\n          setLoading(false); //stop loading when data is fetched\n        }\n      })\n      .catch((error) => console.log(error));\n    setLoading(false);\n  }, [id]);\n\n  const handleDelete = (id) => {\n    const proceed = window.confirm(\"Are you sure, You went to delete\");\n    if (proceed) {\n      axios\n        .delete(`https://shocking-cheateau-10764.herokuapp.com/booking/${id}`)\n        .then((result) => {\n          if (result.data.deletedCount > 0) {\n            setMessage(\"Delete success!\");\n            const remainingBooking = booking.filter(\n              (booking) => booking._id !== id\n            );\n            setBooking(remainingBooking);\n          }\n        })\n        .catch((error) => console.log(error));\n    }\n  };\n\n  return (\n    <div className=\"container \">\n      <div className=\"flex justify-between\">\n        <Sidebar />\n\n        <main className=\"bg-gray-100 w-full mb-16\">\n          {/* Message */}\n          {message && (\n            <div className=\"md:w-3/4 py-4 px-8 float-right\">\n              <Message message={message} />\n            </div>\n          )}\n          <header className=\"px-8 py-8\">\n            <h1 className=\"text-2xl font-semibold\">\n              Hi, {currentUser?.displayName} hear your booking\n            </h1>\n          </header>\n\n          <div className=\"min-h-screen py-5 px-8\">\n            <div className=\"overflow-x-auto w-full\">\n              <table className=\"mx-auto  w-full whitespace-nowrap rounded-lg bg-white divide-y divide-gray-300 overflow-hidden\">\n                <thead className=\"bg-gray-900\">\n                  <tr className=\"text-white text-left\">\n                    <th className=\"font-semibold text-sm uppercase px-6 py-4\">\n                      Tour name\n                    </th>\n                    <th className=\"font-semibold text-sm uppercase px-6 py-4\">\n                      Tour date\n                    </th>\n                    <th className=\"font-semibold text-sm uppercase px-6 py-4\">\n                      Price\n                    </th>\n                    <th className=\"font-semibold text-sm uppercase px-6 py-4\">\n                      Booking DATE\n                    </th>\n\n                    <th className=\"font-semibold text-sm uppercase px-6 py-4 text-center\">\n                      status\n                    </th>\n                    <th className=\"font-semibold text-sm uppercase px-6 py-4 text-center\">\n                      Booking By\n                    </th>\n                    <th className=\"font-semibold text-sm uppercase px-6 py-4\">\n                      Action\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-gray-200\">\n                  {isLoading && (\n                    <div className=\"flex items-center justify-center mx-auto\">\n                      <div className=\"w-40 h-40 border-t-4 border-b-4 border-green-900 rounded-full animate-spin\"></div>\n                    </div>\n                  )}\n\n                  {!!booking && booking.length > 0 ? (\n                    booking.map((booking) => (\n                      <tr key={booking._id}>\n                        <td className=\"px-6 py-4\">\n                          <div className=\"flex items-center space-x-3\">\n                            <div>\n                              <p> {booking?.title} </p>\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <p className=\"\">{booking?.tour_date}</p>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <p>${booking?.package_price}</p>\n                        </td>\n\n                        <td className=\"px-6 py-4 text-center\">\n                          {booking?.create_at}\n                        </td>\n                        <td className=\"px-6 py-4 text-center\">\n                          <span\n                            className={`text-white text-sm w-1/3 pb-1 b capitalize font-semibold px-2 rounded-full ${\n                              booking.status === \"pending\"\n                                ? \"bg-red-400\"\n                                : \"bg-green-600\"\n                            }`}\n                          >\n                            {booking?.status}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <p>{booking?.name}</p>\n                        </td>\n\n                        <td className=\"px-6 py-4 text-center\">\n                          <button\n                            onClick={() => handleDelete(booking?._id)}\n                            className=\"text-red-500 hover:underline\"\n                          >\n                            <i className=\"far fa-trash-alt text-2xl \"></i>\n                          </button>\n                        </td>\n                      </tr>\n                    ))\n                  ) : (\n                    <h1 className=\"text-center\">Data Not Found.</h1>\n                  )}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default MyBooking;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}